<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Pagos</title>
    <link rel="stylesheet" href="styles/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Dashboard de Pagos</h1>
            <p class="subtitle">Registro y seguimiento de pagos para MarÃ­a y Patrick</p>
        </header>
        
        <div class="totals-grid">
            <div class="total-card">
                <h3>ğŸ‘© Total MarÃ­a</h3>
                <div class="total-amount" id="total-maria">S/0</div>
                <div class="payment-count" id="count-maria">0 pagos</div>
            </div>
            
            <div class="total-card">
                <h3>ğŸ‘¨ Total Patrick</h3>
                <div class="total-amount" id="total-patrick">S/0</div>
                <div class="payment-count" id="count-patrick">0 pagos</div>
            </div>
            
            <div class="total-card total-general-card">
                <div class="percent-button-container">
                    <button id="percent-btn" class="percent-button">ğŸ“Š 30%</button>
                    <button id="mypayment-btn" class="mypayment-button">ğŸ’° Calcular</button>
                </div>
                <h3>ğŸ“ˆ Total General</h3>
                <div class="total-amount" id="total-general">S/0</div>
                <div class="payment-count" id="count-total">0 pagos totales</div>
                <div class="percent-result" id="percent-result">
                    <!-- AquÃ­ aparecerÃ¡n los resultados -->
                </div>
            </div>
            
            <!-- âœ… CUADRO DE MI PAGO AUTOMÃTICO -->
            <div class="total-card my-payment-card">
                <h3>ğŸ’³ Mi Pago AutomÃ¡tico</h3>
                <div class="my-payment-amount" id="my-payment-amount">S/0</div>
                <div class="payment-breakdown">
                    <div class="breakdown-item">
                        <span>ğŸ“¦ Total General:</span>
                        <span id="breakdown-total">S/0</span>
                    </div>
                    <div class="breakdown-item">
                        <span>ğŸ“Š Mi 30%:</span>
                        <span id="breakdown-percent">S/0</span>
                    </div>
                    <div class="breakdown-item highlight">
                        <span>ğŸ’° Restante:</span>
                        <span id="breakdown-remaining">S/0</span>
                    </div>
                </div>
                <div class="auto-update">ğŸ”„ Actualizado automÃ¡ticamente</div>
            </div>
        </div>
        
        <div class="input-section">
            <h2>ğŸ“¥ Registrar Pagos</h2>
            <p class="format-info">Formato: <strong>"maria 100"</strong>, <strong>"patrick 50"</strong>, <strong>"75 maria"</strong>, <strong>"m 100"</strong>, <strong>"p 50"</strong></p>
            
            <div class="file-input-group">
                <label for="txt-file" class="file-button">
                    ğŸ“ Seleccionar Archivo TXT
                    <input type="file" id="txt-file" accept=".txt" style="display: none;">
                </label>
                <span class="file-hint">o arrastra un archivo .txt directamente al Ã¡rea de texto â†“</span>
            </div>
            
            <textarea id="payment-notes" placeholder="ğŸ’¡ Ejemplos:
maria 100
patrick 50
75 maria
120 patrick
m 200
p 80

ğŸ“ TambiÃ©n puedes arrastrar y soltar un archivo .txt aquÃ­...
Los pagos se procesarÃ¡n automÃ¡ticamente al soltar el archivo."></textarea>
            
            <div class="button-group">
                <button id="process-btn" class="process-button">âœ… Procesar Pagos</button>
                <button id="clear-btn" class="clear-button">ğŸ—‘ï¸ Limpiar Todo</button>
                <button id="reset-btn" class="reset-button">ğŸ”„ Ejemplos</button>
                <button id="backup-btn" class="backup-button">ğŸ’¾ Descargar Backup</button>
                <button id="load-backup-btn" class="backup-button">ğŸ“‚ Cargar Backup</button>
                <input type="file" id="backup-file" accept=".json" style="display: none;">
            </div>
        </div>
        
        <div class="dashboard">
            <div class="card calendar-card">
                <div class="card-header">
                    <div class="person-selector">
                        <button class="person-btn active" data-person="maria">
                            <span class="person-icon">ğŸ‘©</span> MarÃ­a
                        </button>
                        <button class="person-btn" data-person="patrick">
                            <span class="person-icon">ğŸ‘¨</span> Patrick
                        </button>
                    </div>
                    <h2>ğŸ“… Calendario de Pagos</h2>
                </div>
                
                <div class="week-selector">
                    <button id="prev-week" class="week-nav">â—€ Semana Anterior</button>
                    <div class="current-week" id="current-week">Cargando...</div>
                    <button id="next-week" class="week-nav">Semana Siguiente â–¶</button>
                </div>
                
                <div class="calendar-container">
                    <div class="calendar-header">
                        <div>Lun</div>
                        <div>Mar</div>
                        <div>MiÃ©</div>
                        <div>Jue</div>
                        <div>Vie</div>
                        <div>SÃ¡b</div>
                        <div>Dom</div>
                    </div>
                    <div class="calendar" id="calendar">
                        <!-- Los dÃ­as del calendario se generarÃ¡n con JavaScript -->
                    </div>
                </div>
            </div>
            
            <div class="card history-card">
                <div class="card-header">
                    <h2>ğŸ“‹ Historial de Pagos</h2>
                    <div class="history-stats">
                        <span id="history-count">0 pagos</span>
                    </div>
                </div>
                <div id="payment-history" class="payment-history">
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“</div>
                        <p>No hay pagos registrados</p>
                        <small>Agrega pagos usando el formulario superior</small>
                    </div>
                </div>
            </div>
        </div>

        <footer class="app-footer">
            <p>ğŸ’¡ <strong>Consejo:</strong> Los datos se guardan automÃ¡ticamente en tu navegador</p>
            <p>ğŸ”„ Actualizado por Ãºltima vez: <span id="last-update">--</span></p>
        </footer>
    </div>

    <script src="js/app.js"></script>
</body>
</html>